<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tutorial 3a: A 15 minutes introduction to p5.js • jsReact</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../jquery.sticky-kit.min.js"></script><script src="../../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../../index.html">jsReact</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/articles/example_1.html">Tutorial 1: R talks to JavaScript</a>
    </li>
    <li>
      <a href="../../articles/articles/example_2.html">Tutorial 2: Interactive plotting</a>
    </li>
    <li>
      <a href="../../articles/articles/example_3.html">Tutorial 3a: A 15 minutes introduction to p5.js</a>
    </li>
    <li>
      <a href="../../articles/articles/example_3b.html">Tutorial 3b: Practicing with p5.js</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/kcf-jackson/jsReact">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Tutorial 3a: A 15 minutes introduction to p5.js</h1>
                        <h4 class="author">Jackson Kwok</h4>
            
            <h4 class="date">2017-11-16</h4>
          </div>

    
    
<div class="contents">
<hr>
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>1.1 Introduction</h2>
In this tutorial, we are going to learn a simple, yet powerful JS library called <a href="https://p5js.org/"><code>p5.js</code></a> <a href="#note_1">[1]</a>. The goal of the tutorial is to learn the basics of p5.js in preparation for creating the following two apps:
<div align="center">
<p><img src="gif_images/example_3.gif" style="width:59%;height:400px;"><img src="gif_images/example_4.gif" style="width:40%;height:400px;"></p>
</div>
<p>For the app on the left, the “parameter domain” canvas is created using <code>p5.js</code>, and the right canvas is created using <code>plotly.js</code>. For the app on the right, the entire canvas is created using <code>p5.js</code>. <code>p5.js</code> provides many easy-to-use functions to construct simple geometric objects and manage the mouse events. These are what we are going to learn today.</p>
<div id="i-only-started-looking-into-p5-js-after-jonathan-carroll-proposed-a-project-related-to-it-during-the-ropensci-ozunconf-2017--we-then-joined-the-same-team-which-created-the-package-realtime-" class="section level6">
<h6>
<span id="note_1">[1]</span> I only started looking into <code>p5.js</code> after <a href="https://github.com/jonocarroll">Jonathan Carroll</a> proposed a <a href="https://github.com/ropensci/ozunconf17/issues/23">project</a> related to it during the <a href="http://ozunconf17.ropensci.org/">rOpenSci OzUnconf 2017</a>. (We then joined the same team which created the package <a href="https://github.com/ropenscilabs/realtime"><code>realtime</code></a>.)</h6>
<hr>
</div>
</div>
<div id="basic-structure-and-common-functions-of-p5-js" class="section level2">
<h2 class="hasAnchor">
<a href="#basic-structure-and-common-functions-of-p5-js" class="anchor"></a>1.2 Basic structure and Common functions of p5.js</h2>
<div id="structure" class="section level3">
<h3 class="hasAnchor">
<a href="#structure" class="anchor"></a>Structure</h3>
<p>The basic setup of <code>p5.js</code> consists of the functions <code>setup</code> and <code>draw</code>. As the names suggest, the first function sets up a canvas, and the second function draws on it (60 times per second).</p>
<div id="example-1" class="section level4">
<h4 class="hasAnchor">
<a href="#example-1" class="anchor"></a>Example 1</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(magrittr)
<span class="kw">library</span>(jsReact)
my_html &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/create_html.html">create_html</a></span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="../../reference/add_js_library.html">add_js_library</a></span>(<span class="st">"p5"</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="../../reference/add_script.html">add_script</a></span>(
<span class="st">"</span>
<span class="st">  function setup() {</span>
<span class="st">    createCanvas(800, 800); //width, height</span>
<span class="st">  }</span>
<span class="st">  function draw() {</span>
<span class="st">    ellipse(50, 50, 80);    //circle: x, y, radius</span>
<span class="st">  }</span>
<span class="st">"</span>)
<span class="kw"><a href="../../reference/preview_app.html">preview_app</a></span>(my_html)</code></pre></div>
<p>Since we are drawing the same circle over and over again, it doesn’t show you the browser is really doing work. Try this instead:</p>
</div>
<div id="example-2" class="section level4">
<h4 class="hasAnchor">
<a href="#example-2" class="anchor"></a>Example 2</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_html &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/create_html.html">create_html</a></span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="../../reference/add_js_library.html">add_js_library</a></span>(<span class="st">"p5"</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="../../reference/add_script.html">add_script</a></span>(
<span class="st">"</span>
<span class="st">  function setup() {</span>
<span class="st">    createCanvas(800, 800); //width, height</span>
<span class="st">  }</span>
<span class="st">  var sigma = 10, beta = 8/3, rho = 28;</span>
<span class="st">  var x = 1, y = 1, z = 1, dt = 0.015;</span>
<span class="st">  var new_x, new_y, new_z;</span>
<span class="st">  function draw() {</span>
<span class="st">    // Lorenz system</span>
<span class="st">    new_x = x + (sigma * (y-x)) * dt;</span>
<span class="st">    new_y = y + (x * (rho - z) - y) * dt;</span>
<span class="st">    new_z = z + (x * y - beta * z) * dt;</span>
<span class="st">    x = new_x, y = new_y, z = new_z;</span>
<span class="st">    // Plot</span>
<span class="st">    ellipse(200 + 5 * x, 200 + 5 * y, 10);    //circle: x, y, radius</span>
<span class="st">  }</span>
<span class="st">"</span>)
<span class="kw"><a href="../../reference/preview_app.html">preview_app</a></span>(my_html)</code></pre></div>
<div align="center">
<p><img src="example_3_images/example_3_lorenz.gif"></p>
</div>
<p>Note that all the “magic” really comes from the underlying calculation rather than the plotting function. As we go on, we will see this more often, i.e. the ‘interestingness’ of the app comes from the models in R rather than from the graphics. It’s a good time to clarify that this package is not created to do fancy graphics but to enable us to express our insights using the visual language.</p>
</div>
<div id="isolating-the-r-code-and-the-js-code" class="section level4">
<h4 class="hasAnchor">
<a href="#isolating-the-r-code-and-the-js-code" class="anchor"></a>Isolating the R code and the JS code</h4>
<p>As you may have noticed, in the last two examples the html interface actually hasn’t changed; what has changed is only the JS part. It seems sensible to introduce here a way to isolate / compartmentalise the two parts so that we don’t have to include the R codes every time. For instance, we could rewrite example 1 as follows.</p>
<p>First we put the JS part into a file <code>my_script.js</code>.</p>
<pre><code>// my_script.js
function setup() {
  createCanvas(800, 800); //width, height
}
function draw() {
  ellipse(50, 50, 80);    //circle: x, y, radius
}</code></pre>
<p>Then in the R code, we change the <code>add_script</code> function call to <code>add_script_from_file</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_html &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/create_html.html">create_html</a></span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="../../reference/add_js_library.html">add_js_library</a></span>(<span class="st">"p5"</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="../../reference/add_script_from_file.html">add_script_from_file</a></span>(<span class="st">"my_script.js"</span>)
<span class="kw"><a href="../../reference/preview_app.html">preview_app</a></span>(my_html)</code></pre></div>
<p>From here onward, we will only show the JS code, understanding that the html part and the R code stay the same.</p>
<hr>
</div>
</div>
<div id="common-functions" class="section level3">
<h3 class="hasAnchor">
<a href="#common-functions" class="anchor"></a>Common functions</h3>
<p>We will only go through a small set of functions offered by <code>p5.js</code>, just enough to create the apps I mentioned at the beginning. For the full list of functions, one can consult <a href="https://p5js.org/reference/">this</a>.</p>
<div id="creating-geometric-objects-rect-line-ellipse" class="section level4">
<h4 class="hasAnchor">
<a href="#creating-geometric-objects-rect-line-ellipse" class="anchor"></a>Creating geometric objects: <code>rect, line, ellipse</code>
</h4>
<pre><code>function setup() {
  createCanvas(400, 400); //width, height
}
function draw() {
  ellipse(50, 50, 80);     //circle: x, y, radius
  rect(10, 10, 20, 20);    //rectangle: x, y, width, height
  line(60, 120, 80, 160);  //line: x1, y1, x2, y2
}</code></pre>
<p>A nice feature about <code>p5.js</code> is that everything is pretty self-explanatory. What else can I add really?</p>
</div>
<div id="managing-the-mouse-events-mouseispressed-mousex-mousey" class="section level4">
<h4 class="hasAnchor">
<a href="#managing-the-mouse-events-mouseispressed-mousex-mousey" class="anchor"></a>Managing the mouse events: <code>mouseIsPressed, mouseX, mouseY</code>
</h4>
<pre><code>function setup() {
  createCanvas(800, 800); //width, height
}
function draw() {
  if (mouseIsPressed) {
    ellipse(mouseX, mouseY, 30);  //radius: 30
  }
}</code></pre>
<p>In the above, <code>draw</code> monitors if there is a mouse click; if so, it will plot a point at the mouse position given by <code>mouseX, mouseY</code>. Since <code>draw</code> updates the canvas 60 times a second, you won’t notice any delay.</p>
<div align="center">
<p><img src="example_3_images/static.png" style="height:400px"><img src="example_3_images/click.gif" style="height:400px"></p>
</div>
<hr>
</div>
</div>
</div>
<div id="summary" class="section level2">
<h2 class="hasAnchor">
<a href="#summary" class="anchor"></a>1.3 Summary</h2>
<p>In this tutorial, we have learnt some basics of <code>p5.js</code>. This includes:</p>
<ul>
<li><p>the structure: it consists of two key functions <code>setup</code> and <code>draw</code>, and</p></li>
<li><p>some common functions: <code>rect, line</code> and <code>ellipse</code> for creating simple geometric objects, <code>mouseIsPressed, mouseX</code> and <code>mouseY</code> for managing mouse events.</p></li>
</ul>
<p>Now we are ready to move on to example 3 and example 4! See you in the next tutorial.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">1.1 Introduction</a></li>
      <li><a href="#basic-structure-and-common-functions-of-p5-js">1.2 Basic structure and Common functions of p5.js</a></li>
      <li><a href="#summary">1.3 Summary</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Chun Fung (Jackson) Kwok.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
