<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tutorial 9: App deployment and new widgets • jsReact</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../jquery.sticky-kit.min.js"></script><script src="../../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../../index.html">jsReact</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../index.html">Home</a>
</li>
<li>
  <a href="../../articles/index.html">Articles</a>
</li>
<li>
  <a href="../../articles/examples/gallery.html">Gallery</a>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/kcf-jackson/jsReact">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Tutorial 9: App deployment and new widgets</h1>
                        <h4 class="author">Jackson Kwok</h4>
            
            <h4 class="date">2017-11-30</h4>
          </div>

    
    
<div class="contents">
<style>
div.interface pre { background-color: #ffcccc; }
div.js pre { background-color: #D4EBFF; }
div.r pre { background-color: #c9ffc1; }
div.others pre { background-color: lightyellow; }
</style>
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>1.1 Introduction</h2>
In this tutorial, we first talk about a simple way to deploy your app, then we learn about a couple of new widgets I added to the package. The app we are going to work with is this:
<div align="center">
<p><img src="gif_images/example_9.gif" style="width:57%;height:400px;"></p>
</div>
<p>The app brings Karpathy’s <a href="https://github.com/karpathy/tsnejs">tSNEJS</a> to R! The code for the app can be found <a href="https://github.com/kcf-jackson/jsReact/tree/master/examples/9_tsne">here</a>.</p>
<hr>
</div>
<div id="deploying-an-app" class="section level2">
<h2 class="hasAnchor">
<a href="#deploying-an-app" class="anchor"></a>1.2 Deploying an app</h2>
<p>The app takes about 150 lines to implement (roughly half-half in JS / R). But once you have developed the app, you can save the final product as an html, then call that app whenever you need without going through the original codes again. Let me illustrate that with an example.</p>
<p>First, we inspect the last 10+ lines of the R code of the app.</p>
<div class="r">
<pre><code>my_r_fun &lt;- function(msg) {
  # Pass whatever data you have to JS!
  n &lt;- 100
  random_data &lt;- rbind(
    sample_data(n), sample_data(n, mean = 10, sd = 4)
  )
  list(r_dist_matrix = as.matrix(dist(random_data)),
       color = c(rep(0, n), rep(1, n)))
}

preview_app(my_html, my_r_fun, T)
# write_html_to_file(my_html, "tsne.html")
# my_app &lt;- create_app(html_file = "tsne.html", user_function = my_r_fun)
# start_app(my_app)</code></pre>
</div>
<ul>
<li>We see that the R function(<code>my_r_fun</code>) is only responsible for passing the data (<code>random_data</code>, created using some other functions). Once the data are sent to JS, all the work is handled by JS. It means if we want to modify this app to visualise our data, we simply need to replace the R function by one that returns our own data.</li>
<li>Recall that the last three lines are the formal way to run an app.</li>
</ul>
<p>Note that the <code>create_app</code> call only takes a html file and a r function. It means once you have the html file, the development code is irrelevant to running the app. Hence, we can conveniently wrap everything into a function call that takes data from users, creates a data-passing function that passes our data and fires up the app! This is how we do it:</p>
<div class="r">
<pre><code>library(jsReact)
start_tsne_app &lt;- function(my_data, app_html = "tsne.html") {
  send_r_data &lt;- function(msg) {
    list(r_dist_matrix = as.matrix(dist(my_data)))  # pass our data here
  }
  my_app &lt;- create_app(app_html, send_r_data, T)
  start_app(my_app)
}
start_tsne_app(unique(iris)[,1:4])</code></pre>
</div>
<p>Now your app becomes a regular R function call (and a one-liner!). Though don’t forget to send your users the app html file you created since they need it to run the app.</p>
<hr>
</div>
<div id="new-widgets" class="section level2">
<h2 class="hasAnchor">
<a href="#new-widgets" class="anchor"></a>1.3 New widgets</h2>
<p>Next, we are going to learn about two widgets that are added to the package recently: the <code><a href="../../reference/add_google_style_button.html">add_google_style_button()</a></code> and <code><a href="../../reference/add_slider_with_text.html">add_slider_with_text()</a></code>. Here is a basic example.</p>
<pre><code>library(jsReact)
library(magrittr)
my_app &lt;- create_html() %&gt;% 
  add_google_style() %&gt;%
  add_google_style_button(material_id = "done") %&gt;% 
  add_google_style_button(material_id = "favorite") %&gt;% 
  add_slider_with_text(text = "My Slider ", value = 40)
preview_app(my_app)</code></pre>
<ul>
<li>
<code><a href="../../reference/add_google_style.html">add_google_style()</a></code> adds a css stylesheet from “<a href="https://fonts.googleapis.com/icon?family=Material+Icons" class="uri">https://fonts.googleapis.com/icon?family=Material+Icons</a>”. You can see the <a href="http://google.github.io/material-design-icons/">website</a> for more details about the linking.</li>
<li>
<code><a href="../../reference/add_google_style_button.html">add_google_style_button()</a></code> adds a button with an icon identified by the ‘material_id’ listed <a href="https://material.io/icons/">here</a>. You can pass other parameters into it like the regular button.</li>
<li>
<code>add_slider_with_text</code> adds a slider with a text that shows the slider value. Default value must be given to initiate the widget.</li>
</ul>
<div align="center">
<div class="figure">
<img src="example_9_images/widgets.png" alt="Result of the code shown in Section 1.3"><p class="caption">Result of the code shown in Section 1.3</p>
</div>
</div>
</div>
<div id="summary" class="section level2">
<h2 class="hasAnchor">
<a href="#summary" class="anchor"></a>1.4 Summary</h2>
<p>In this tutorial, we learnt about app deployment and two new widgets.</p>
<ul>
<li><p>Despite its simplicity, the app deployment part is important as it reveals the true potential of the package: this package allows you to <strong>port any existing JS libraries to R quite easily, upon which you can build apps and deploy as regular R function calls</strong>.</p></li>
<li><p>For the second part, we talked about how to add buttons with google-material-design icons, and sliders with texts that link to the (slider) values.</p></li>
</ul>
<p>And that’s it for this tutorial! I shall see you next time.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">1.1 Introduction</a></li>
      <li><a href="#deploying-an-app">1.2 Deploying an app</a></li>
      <li><a href="#new-widgets">1.3 New widgets</a></li>
      <li><a href="#summary">1.4 Summary</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Chun Fung (Jackson) Kwok.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
