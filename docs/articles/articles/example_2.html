<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tutorial 2: Interactive plotting • jsReact</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../jquery.sticky-kit.min.js"></script><script src="../../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../../index.html">jsReact</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../index.html">Home</a>
</li>
<li>
  <a href="../../articles/index.html">Articles</a>
</li>
<li>
  <a href="../../articles/examples/gallery.html">Gallery</a>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/kcf-jackson/jsReact">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Tutorial 2: Interactive plotting</h1>
                        <h4 class="author">Jackson Kwok</h4>
            
            <h4 class="date">2017-11-15</h4>
          </div>

    
    
<div class="contents">
<hr>
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>1.1 Introduction</h2>
<div id="introduction-1" class="section level3">
<h3 class="hasAnchor">
<a href="#introduction-1" class="anchor"></a>Introduction</h3>
<p>In this example, we study a way to trigger an event in the browser and update a plot interactively. The goal is to create apps that allows for smooth transition (more so than Shiny!). This is the app we are going to make:</p>
<div class="figure">
<img src="gif_images/example_2.gif" style="width:50.0%">
</div>
<p>The app displays a point with a randomly generated x-coordinate and a y-coordinate controlled by the slider.</p>
</div>
<div id="outlook" class="section level3">
<h3 class="hasAnchor">
<a href="#outlook" class="anchor"></a>Outlook</h3>
After this tutorial, you can proceed to example 8 and example 8b:
<div>
<p><img src="gif_images/example_8.gif" style="width:49%;height:400px;"><img src="gif_images/example_8b.gif" style="width:49%;height:400px;"></p>
</div>
<p>I hope you are convinced that while they look different, they are really the same as this example just with different data. In those examples, we will leverage the tweenR package and the technique we go through in this tutorial to create the animation effect.</p>
<hr>
</div>
</div>
<div id="design" class="section level2">
<h2 class="hasAnchor">
<a href="#design" class="anchor"></a>1.2 Design</h2>
<p>The code for this tutorial can be found <a href="https://github.com/kcf-jackson/jsReact/blob/master/inst/example_2.R">here</a>.</p>
<div id="app-interface" class="section level3">
<h3 class="hasAnchor">
<a href="#app-interface" class="anchor"></a>1.2.1 App interface</h3>
<p>Let’s inspect the interface:</p>
<div class="figure">
<img src="example_2_images/app_interface.png" style="width:50.0%">
</div>
<p>In terms of interface, this app is largely the same as the one we saw in tutorial 1. The only difference is the additional container at the bottom, in which we will make a<code>plotly</code> plot.</p>
<hr>
</div>
<div id="code" class="section level3">
<h3 class="hasAnchor">
<a href="#code" class="anchor"></a>1.2.2 Code</h3>
<p>It is no surprise that the code for this app is similar to tutorial 1! <img src="example_2_images/codes.png" style="width:80.0%"></p>
<p>In fact, there are only 8 new lines in this file. Alright, let’s break the codes into four parts again and inspect each of them.</p>
<hr>
<div id="html" class="section level4">
<h4 class="hasAnchor">
<a href="#html" class="anchor"></a>Html</h4>
<div class="figure">
<img src="example_2_images/html.png" style="width:80.0%">
</div>
<p>Lines 6 and 11 are the new lines.</p>
<ul>
<li><p>Line 6: Since we are going to make a<code>plotly</code> plot, so we need to include the library in the html file.</p></li>
<li><p>Line 11: Use <code>add_div</code> again to add a container and give it an <code>id</code> for future reference. This is where we will place our <code>plotly</code> plot into.</p></li>
</ul>
</div>
<div id="javascript" class="section level4">
<h4 class="hasAnchor">
<a href="#javascript" class="anchor"></a>Javascript</h4>
<div class="figure">
<img src="example_2_images/javascript.png" style="width:80.0%">
</div>
<p>Lines 18-22 are the new lines. These lines produce the plotly plot using data received from R.</p>
<ul>
<li><p>Line 18: Standard command to parse the data from R (as mentioned in tutorial 1).</p></li>
<li><p>Line 19-20: Commands to construct the plot. These are from the <a href="https://plot.ly/javascript/line-and-scatter/">plotly.js website</a> (simply apply your supreme copy-and-paste skill). <code>x,y</code> refers to the data, <code>mode: 'markers'</code> suggests points, and <code>type: 'scatter'</code> suggests scatter plot. (This uses the grammar of graphics.)</p></li>
<li><p>Line 21: Actually making the plot. <code>[trace1]</code> is plotted in the container with id <code>plotly_plot</code> according to <code>layout</code>. Note that <code>layout</code> is optional, if you don’t supply that, plotly will use its default.</p></li>
</ul>
<hr>
</div>
<div id="r-function" class="section level4">
<h4 class="hasAnchor">
<a href="#r-function" class="anchor"></a>R function</h4>
<div class="figure">
<img src="example_2_images/r_function.png" style="width:80.0%">
</div>
<p>Line 27 is the new line.</p>
<ul>
<li>Lines 27: We return a list of x, y coordinates for <code>plotly</code>. The <code>x</code> coordinate is a random number and <code>y</code> is the slider value (received from JS side).</li>
</ul>
<hr>
</div>
<div id="others" class="section level4">
<h4 class="hasAnchor">
<a href="#others" class="anchor"></a>Others</h4>
<div class="figure">
<img src="example_2_images/others.png" style="width:80.0%">
</div>
<p>No new line.</p>
<ul>
<li>This part should become standard in each app. (Recall that line 29 is not needed if you supply your own html file.)</li>
</ul>
<hr>
</div>
</div>
<div id="simple-modification" class="section level3">
<h3 class="hasAnchor">
<a href="#simple-modification" class="anchor"></a>1.2.3 Simple modification</h3>
<p>If you don’t like the idea of sliders, we can remove that and replace it by a timer to send some random data to R a few times a second (so that the plot updates by itself). The timer function is given by <code>setInterval(fun, t)</code>. It calls the function <code>fun</code> once every <code>t</code> milli-secs. (Note that once every 100 milli-seconds = 1 second 10 times.)</p>
<pre><code>var myVar = setInterval(animate_frame, 100);
function animate_frame() {
  ws.send(60 + Math.random() * 10);
}</code></pre>
<p>For simplicity, we just insert this code at the beginning of the Javascript, keeping the slider in the app. This is what we get:</p>
<div class="figure">
<img src="gif_images/example_2b.gif" style="width:50.0%">
</div>
<hr>
</div>
</div>
<div id="summary" class="section level2">
<h2 class="hasAnchor">
<a href="#summary" class="anchor"></a>1.3 Summary</h2>
<p>In this tutorial, we have learnt how to make a <code>plotly</code> plot using JS and have it respond to slider events.</p>
<ul>
<li><p>For the html part, we added the <code>plotly.js</code> library using <code>add_js_library</code> and an extra container using <code>add_div</code>.</p></li>
<li><p>For the JS part, we made a plot using functions from the <code>plotly.js</code> library. This requires very little work as we simply modified code extracted from <code>plotly.js</code> example <a href="https://plot.ly/javascript/line-and-scatter/">webpage</a>!</p></li>
<li><p>For the R part, we made R return a list of x, y coordinates.</p></li>
</ul>
<p>As an extension, we learnt about timer events triggered by <code>setInterval(fun, t)</code>, which runs the function <code>fun</code> once every <code>t</code> milli-seconds. Overall, this tutorial prepares us for animation-type visualisation. From here one could head to example 3, where we will learn about another JS library (<code>p5.js</code>) to create some common visual effects, or example 8, where we will create animated plots using simulated / real data. See you in the next tutorial!</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">1.1 Introduction</a></li>
      <li><a href="#design">1.2 Design</a></li>
      <li><a href="#summary">1.3 Summary</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Chun Fung (Jackson) Kwok.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
